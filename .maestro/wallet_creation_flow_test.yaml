appId: com.olas.app
name: Olas Wallet Creation Silent Flow Test

---
# Test: Silent wallet creation flow (no mnemonic display during creation)
# WARNING: This test will create a real wallet on mainnet
# Only run in test environments or when you intend to create a wallet

# Wait for app to load
- extendedWaitUntil:
    visible:
      text: "Home"
    timeout: 15000

- takeScreenshot: "01_app_loaded"

# Navigate to Wallet tab
- tapOn:
    text: "Wallet"

- extendedWaitUntil:
    visible:
      text: "Spark Wallet"
    timeout: 5000

- takeScreenshot: "02_wallet_tab"

# Tap Create New Wallet
- tapOn:
    text: "Create New Wallet"

- extendedWaitUntil:
    visible:
      text: "Create Your Wallet"
    timeout: 5000

- takeScreenshot: "03_create_wallet_prompt"

# Verify the new messaging
- assertVisible:
    text: "Your wallet will be created and ready to use immediately"

# Tap Create Wallet button
- tapOn:
    text: "Create Wallet"

# Wait for wallet creation (may take a moment to connect to Spark network)
# Should return to wallet view with connected state
- extendedWaitUntil:
    visible:
      text: "Balance"
    timeout: 60000

- takeScreenshot: "04_wallet_connected"

# Verify wallet is now connected
- assertVisible:
    text: "sats"

- assertVisible:
    text: "Receive"

- assertVisible:
    text: "Send"

# Verify backup reminder banner is shown
- assertVisible:
    text: "Remember to backup your wallet"

- assertVisible:
    text: "Backup"

- takeScreenshot: "05_backup_reminder_visible"

# Test backup access from settings
- tapOn:
    id: "gearshape"  # Settings icon

- extendedWaitUntil:
    visible:
      text: "Spark Wallet"
    timeout: 5000

- takeScreenshot: "06_settings_opened"

- tapOn:
    text: "Show Recovery Phrase"

- extendedWaitUntil:
    visible:
      text: "Show Recovery Phrase"
    timeout: 5000

- takeScreenshot: "07_backup_prompt"

# Tap Reveal Phrase
- tapOn:
    text: "Reveal Phrase"

- extendedWaitUntil:
    visible:
      text: "Your Recovery Phrase"
    timeout: 5000

- takeScreenshot: "08_mnemonic_revealed"

# Close backup view
- tapOn:
    text: "Done"

# Close settings
- tapOn:
    text: "Cancel"

# Verify backup reminder is now gone (hasBackedUpSparkWallet flag set)
- assertNotVisible:
    text: "Remember to backup your wallet"

- takeScreenshot: "09_backup_complete"
